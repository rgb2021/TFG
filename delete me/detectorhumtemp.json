{
    "detectorModelDefinition": {
        "states": [
            {
                "stateName": "comprobarTemperatura",
                "onInput": {
                    "events": [],
                    "transitionEvents": [
                        {
                            "eventName": "temperaturaAlta",
                            "condition": "$input.entrada.temperatura >= $variable.temperaturaMaxima",
                            "actions": [
                                {
                                    "setVariable": {
                                        "variableName": "valorGrande",
                                        "value": "true"
                                    }
                                }
                            ],
                            "nextState": "temperaturaPorEncima"
                        },
                        {
                            "eventName": "temperaturaBaja",
                            "condition": "$input.entrada.temperatura < $variable.temperaturaMinima",
                            "actions": [
                                {
                                    "setVariable": {
                                        "variableName": "valorGrande",
                                        "value": "false"
                                    }
                                }
                            ],
                            "nextState": "temperaturaPorDebajo"
                        },
                        {
                            "eventName": "temperaturaOK",
                            "condition": "$input.entrada.temperatura <= $variable.temperaturaMaxima && $input.entrada.temperatura > $variable.temperaturaMinima",
                            "actions": [],
                            "nextState": "temperaturaOK"
                        }
                    ]
                },
                "onEnter": {
                    "events": [
                        {
                            "eventName": "Inicio",
                            "condition": "true",
                            "actions": [
                                {
                                    "setVariable": {
                                        "variableName": "temperaturaMaxima",
                                        "value": "35"
                                    }
                                },
                                {
                                    "setVariable": {
                                        "variableName": "temperaturaMinima",
                                        "value": "10"
                                    }
                                },
                                {
                                    "setVariable": {
                                        "variableName": "valorGrande",
                                        "value": "false"
                                    }
                                }
                            ]
                        },
                        {
                            "eventName": "enviarEstado",
                            "condition": "true",
                            "actions": [
                                {
                                    "iotTopicPublish": {
                                        "mqttTopic": "test/estadoTemp"
                                    }
                                }
                            ]
                        }
                    ]
                },
                "onExit": {
                    "events": []
                }
            },
            {
                "stateName": "temperaturaPorEncima",
                "onInput": {
                    "events": [],
                    "transitionEvents": [
                        {
                            "eventName": "temperaturaOK",
                            "condition": "$input.entrada.temperatura <= $variable.temperaturaMaxima && $input.entrada.temperatura > $variable.temperaturaMinima",
                            "actions": [],
                            "nextState": "temperaturaOK"
                        },
                        {
                            "eventName": "temperaturaBaja",
                            "condition": "$input.entrada.temperatura < $variable.temperaturaMinima",
                            "actions": [],
                            "nextState": "temperaturaPorDebajo"
                        }
                    ]
                },
                "onEnter": {
                    "events": [
                        {
                            "eventName": "notificacionTempAlta",
                            "condition": "true",
                            "actions": [
                                {
                                    "sns": {
                                        "targetArn": "arn:aws:sns:eu-central-1:329640145453:temperaturaAlta"
                                    }
                                }
                            ]
                        }
                    ]
                },
                "onExit": {
                    "events": []
                }
            },
            {
                "stateName": "temperaturaPorDebajo",
                "onInput": {
                    "events": [],
                    "transitionEvents": [
                        {
                            "eventName": "temperaturaOk",
                            "condition": "$input.entrada.temperatura <= $variable.temperaturaMaxima && $input.entrada.temperatura > $variable.temperaturaMinima",
                            "actions": [],
                            "nextState": "temperaturaOK"
                        },
                        {
                            "eventName": "temperaturaAlta",
                            "condition": "$input.entrada.temperatura >= $variable.temperaturaMaxima",
                            "actions": [],
                            "nextState": "temperaturaPorEncima"
                        }
                    ]
                },
                "onEnter": {
                    "events": [
                        {
                            "eventName": "notificacionTempBaja",
                            "condition": "true",
                            "actions": [
                                {
                                    "sns": {
                                        "targetArn": "arn:aws:sns:eu-central-1:329640145453:temperaturaBaja"
                                    }
                                }
                            ]
                        }
                    ]
                },
                "onExit": {
                    "events": []
                }
            },
            {
                "stateName": "temperaturaOK",
                "onInput": {
                    "events": [],
                    "transitionEvents": [
                        {
                            "eventName": "temperaturaAlta",
                            "condition": "$input.entrada.temperatura >= $variable.temperaturaMaxima",
                            "actions": [],
                            "nextState": "temperaturaPorEncima"
                        },
                        {
                            "eventName": "temperaturaBaja",
                            "condition": "$input.entrada.temperatura < $variable.temperaturaMinima",
                            "actions": [],
                            "nextState": "temperaturaPorDebajo"
                        }
                    ]
                },
                "onEnter": {
                    "events": []
                },
                "onExit": {
                    "events": []
                }
            },
            {
                "stateName": "comprobarHumedad",
                "onInput": {
                    "events": [],
                    "transitionEvents": [
                        {
                            "eventName": "humedadAlta",
                            "condition": "$input.entrada.humedad >= $variable.humedadMaxima",
                            "actions": [
                                {
                                    "setVariable": {
                                        "variableName": "valorGrande",
                                        "value": "true"
                                    }
                                }
                            ],
                            "nextState": "humedadPorEncima"
                        },
                        {
                            "eventName": "humedadBaja",
                            "condition": "$input.entrada.humedad < $variable.humedadMinima",
                            "actions": [
                                {
                                    "setVariable": {
                                        "variableName": "valorGrande",
                                        "value": "false"
                                    }
                                }
                            ],
                            "nextState": "humedadPorDebajo"
                        },
                        {
                            "eventName": "humedadOK",
                            "condition": "$input.entrada.humedad <= $variable.humedadMaxima && $input.entrada.humedad > $variable.humedadMinima",
                            "actions": [],
                            "nextState": "humedadOK"
                        }
                    ]
                },
                "onEnter": {
                    "events": [
                        {
                            "eventName": "Inicio",
                            "condition": "true",
                            "actions": [
                                {
                                    "setVariable": {
                                        "variableName": "humedadMaxima",
                                        "value": "35"
                                    }
                                },
                                {
                                    "setVariable": {
                                        "variableName": "humedadMinima",
                                        "value": "10"
                                    }
                                },
                                {
                                    "setVariable": {
                                        "variableName": "valorGrande",
                                        "value": "false"
                                    }
                                }
                            ]
                        },
                        {
                            "eventName": "enviarEstado",
                            "condition": "true",
                            "actions": [
                                {
                                    "iotTopicPublish": {
                                        "mqttTopic": "test/estadoTemp"
                                    }
                                }
                            ]
                        }
                    ]
                },
                "onExit": {
                    "events": []
                }
            },
            {
                "stateName": "humedadPorEncima",
                "onInput": {
                    "events": [],
                    "transitionEvents": [
                        {
                            "eventName": "humedadOK",
                            "condition": "$input.entrada.humedad <= $variable.humedadMaxima && $input.entrada.humedad > $variable.humedadMinima",
                            "actions": [],
                            "nextState": "humedadOK"
                        },
                        {
                            "eventName": "humedadBaja",
                            "condition": "$input.entrada.humedad < $variable.humedadMinima",
                            "actions": [],
                            "nextState": "humedadPorDebajo"
                        }
                    ]
                },
                "onEnter": {
                    "events": [
                        {
                            "eventName": "notificacionTempAlta",
                            "condition": "true",
                            "actions": [
                                {
                                    "sns": {
                                        "targetArn": "arn:aws:sns:eu-central-1:329640145453:humedadAlta"
                                    }
                                }
                            ]
                        }
                    ]
                },
                "onExit": {
                    "events": []
                }
            },
            {
                "stateName": "humedadPorDebajo",
                "onInput": {
                    "events": [],
                    "transitionEvents": [
                        {
                            "eventName": "humedadOk",
                            "condition": "$input.entrada.humedad <= $variable.humedadMaxima && $input.entrada.humedad > $variable.humedadMinima",
                            "actions": [],
                            "nextState": "humedadOK"
                        },
                        {
                            "eventName": "humedadAlta",
                            "condition": "$input.entrada.humedad >= $variable.humedadMaxima",
                            "actions": [],
                            "nextState": "humedadPorEncima"
                        }
                    ]
                },
                "onEnter": {
                    "events": [
                        {
                            "eventName": "notificacionTempBaja",
                            "condition": "true",
                            "actions": [
                                {
                                    "sns": {
                                        "targetArn": "arn:aws:sns:eu-central-1:329640145453:humedadBaja"
                                    }
                                }
                            ]
                        }
                    ]
                },
                "onExit": {
                    "events": []
                }
            },
            {
                "stateName": "humedadOK",
                "onInput": {
                    "events": [],
                    "transitionEvents": [
                        {
                            "eventName": "humedadAlta",
                            "condition": "$input.entrada.humedad >= $variable.humedadMaxima",
                            "actions": [],
                            "nextState": "humedadPorEncima"
                        },
                        {
                            "eventName": "temperaturaBaja",
                            "condition": "$input.entrada.humedad < $variable.humedadMinima",
                            "actions": [],
                            "nextState": "humedadPorDebajo"
                        }
                    ]
                },
                "onEnter": {
                    "events": []
                },
                "onExit": {
                    "events": []
                }
            }
        ],
        "initialStateName": "comprobarTemperatura"
    },
    "detectorModelDescription": null,
    "detectorModelName": "detectorhumTemp",
    "evaluationMethod": "SERIAL",
    "key": null,
    "roleArn": "arn:aws:iam::329640145453:role/service-role/AWS_IoTEvents_HelloWorld_ActionRole"
}